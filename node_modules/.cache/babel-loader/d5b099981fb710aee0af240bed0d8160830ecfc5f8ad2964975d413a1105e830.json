{"ast":null,"code":"// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\nimport { GoogleAuthProvider, getAuth, signInWithPopup, GithubAuthProvider, signInWithEmailAndPassword, createUserWithEmailAndPassword, sendPasswordResetEmail, signOut } from \"firebase/auth\";\nimport { getFirestore, query, getDocs, collection, where, addDoc, updateDoc, doc } from \"firebase/firestore\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCS7dNZAYmYEJA6GXKcxtioz_KhtCN0AT4\",\n  authDomain: \"wearworx-sakshxm08.firebaseapp.com\",\n  projectId: \"wearworx-sakshxm08\",\n  storageBucket: \"wearworx-sakshxm08.appspot.com\",\n  messagingSenderId: \"939214306183\",\n  appId: \"1:939214306183:web:4bc74908c5d6ef682ef122\"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\n\n// Google Login\nconst googleProvider = new GoogleAuthProvider();\nconst signInWithGoogle = async () => {\n  try {\n    const res = await signInWithPopup(auth, googleProvider);\n    const user = res.user;\n    const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user.uid));\n    const docs = await getDocs(q);\n    if (docs.docs.length === 0) {\n      await addDoc(collection(db, \"users\"), {\n        uid: user.uid,\n        name: user.displayName,\n        email: user.email,\n        authProvider: \"Google\"\n      });\n    }\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\n// Signup with Email And Password\nconst signupWithEmail = async (name, email, password) => {\n  try {\n    const res = await createUserWithEmailAndPassword(auth, email, password);\n    const user = res.user;\n    await addDoc(collection(db, \"users\"), {\n      uid: user.uid,\n      name,\n      email,\n      authProvider: \"local\"\n    });\n    alert(\"User registered successfully\");\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\n// Github Login\nconst githubProvider = new GithubAuthProvider();\nconst signInWithGithub = async () => {\n  try {\n    const res = await signInWithPopup(auth, githubProvider);\n    const user = res.user;\n    const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user.uid));\n    const docs = await getDocs(q);\n    if (docs.docs.length === 0) {\n      await addDoc(collection(db, \"users\"), {\n        uid: user.uid,\n        name: user.displayName,\n        email: user.email,\n        authProvider: \"Google\"\n      });\n    }\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\n// Login with Email and Password\nconst loginWithEmail = async (email, password) => {\n  try {\n    await signInWithEmailAndPassword(auth, email, password);\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\n// Reset Password\nconst resetPassword = async email => {\n  try {\n    await sendPasswordResetEmail(auth, email);\n    alert(\"Password Reset Email sent !\");\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\n// Logout\nconst logout = () => {\n  signOut(auth);\n};\n\n// Get User Details\nconst getUser = async user => {\n  const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user.uid));\n  let userDetails = [];\n  const docs = await getDocs(q);\n  docs.forEach(doc => {\n    console.log(doc.data());\n    userDetails.push(doc.data());\n  });\n  return userDetails[0];\n};\n\n// Add to Firebase Cart\nconst firebaseCart = async (user, cart) => {\n  try {\n    const q = query(collection(db, \"cart\"), where(\"email\", \"==\", user.email));\n    const docs = await getDocs(q);\n    if (docs.docs.length === 0) {\n      await addDoc(collection(db, \"cart\"), {\n        uid: user.uid,\n        email: user.email,\n        cart: cart\n      });\n    } else {\n      // await updateDoc(\n      //   doc(db, \"cart\", docs),\n      //   {\n      //     cart: cart,\n      //   }\n      // );\n      console.log(docs);\n    }\n    return docs.docs;\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\nexport { auth, db, signInWithGoogle, signupWithEmail, signInWithGithub, loginWithEmail, resetPassword, getUser, logout, firebaseCart };\n\n// // Get Users\n// const users = [];\n// const data = await getDocs(collection(db, \"users\"));\n// if (data) {\n//   data.forEach((item) => {\n//     users.push(item.data());\n//   });\n// }\n// export { users };\n// export const addUser = async (user, cart, fav) => {\n//   try {\n//     if (!users.find((userEmail) => userEmail.email === user.email)) {\n//       await setDoc(doc(db, \"users\", user.email), {\n//         name: user.displayName,\n//         email: user.email,\n//         cart: cart,\n//         fav: fav,\n//       });\n//       // console.log(\"Document written with ID: \", docRef.id);\n//     } else if (!users.find((userCart) => userCart.cart === cart)) {\n//       await updateDoc(doc(db, \"users\", user.email), {\n//         cart: cart,\n//       });\n//     } else if (!users.find((userFav) => userFav.fav === user.fav)) {\n//       await updateDoc(doc(db, \"users\", user.email), {\n//         fav: fav,\n//       });\n//     }\n//     console.log(users);\n//   } catch (e) {\n//     console.error(\"Error adding document: \", e);\n//   }\n// };\n// export const getCartData = async (user) => {\n//   const userCart = [];\n//   const userFav = [];\n//   const docRef = doc(db, \"users\", user.email);\n//   const data = await getDoc(docRef);\n//   if (data.exists()) {\n//     userCart.push(data.data().cart);\n//     userFav.push(data.data().fav);\n//     console.log(userCart, userFav);\n//   } else console.log(\"no data\");\n// };","map":{"version":3,"names":["initializeApp","GoogleAuthProvider","getAuth","signInWithPopup","GithubAuthProvider","signInWithEmailAndPassword","createUserWithEmailAndPassword","sendPasswordResetEmail","signOut","getFirestore","query","getDocs","collection","where","addDoc","updateDoc","doc","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","app","auth","db","googleProvider","signInWithGoogle","res","user","q","uid","docs","length","name","displayName","email","authProvider","err","console","error","alert","message","signupWithEmail","password","githubProvider","signInWithGithub","loginWithEmail","resetPassword","logout","getUser","userDetails","forEach","log","data","push","firebaseCart","cart"],"sources":["/Users/sakshamgambhir/Desktop/Work+Projects/Web Development/Projects/Project 12 - WearWorx/client/src/firebase/Firebase.js"],"sourcesContent":["// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\nimport {\n  GoogleAuthProvider,\n  getAuth,\n  signInWithPopup,\n  GithubAuthProvider,\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  sendPasswordResetEmail,\n  signOut,\n} from \"firebase/auth\";\nimport {\n  getFirestore,\n  query,\n  getDocs,\n  collection,\n  where,\n  addDoc,\n  updateDoc,\n  doc,\n} from \"firebase/firestore\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCS7dNZAYmYEJA6GXKcxtioz_KhtCN0AT4\",\n  authDomain: \"wearworx-sakshxm08.firebaseapp.com\",\n  projectId: \"wearworx-sakshxm08\",\n  storageBucket: \"wearworx-sakshxm08.appspot.com\",\n  messagingSenderId: \"939214306183\",\n  appId: \"1:939214306183:web:4bc74908c5d6ef682ef122\",\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\n\n// Google Login\nconst googleProvider = new GoogleAuthProvider();\nconst signInWithGoogle = async () => {\n  try {\n    const res = await signInWithPopup(auth, googleProvider);\n    const user = res.user;\n    const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user.uid));\n    const docs = await getDocs(q);\n    if (docs.docs.length === 0) {\n      await addDoc(collection(db, \"users\"), {\n        uid: user.uid,\n        name: user.displayName,\n        email: user.email,\n        authProvider: \"Google\",\n      });\n    }\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\n// Signup with Email And Password\nconst signupWithEmail = async (name, email, password) => {\n  try {\n    const res = await createUserWithEmailAndPassword(auth, email, password);\n    const user = res.user;\n    await addDoc(collection(db, \"users\"), {\n      uid: user.uid,\n      name,\n      email,\n      authProvider: \"local\",\n    });\n    alert(\"User registered successfully\");\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\n// Github Login\nconst githubProvider = new GithubAuthProvider();\nconst signInWithGithub = async () => {\n  try {\n    const res = await signInWithPopup(auth, githubProvider);\n    const user = res.user;\n    const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user.uid));\n    const docs = await getDocs(q);\n    if (docs.docs.length === 0) {\n      await addDoc(collection(db, \"users\"), {\n        uid: user.uid,\n        name: user.displayName,\n        email: user.email,\n        authProvider: \"Google\",\n      });\n    }\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\n// Login with Email and Password\nconst loginWithEmail = async (email, password) => {\n  try {\n    await signInWithEmailAndPassword(auth, email, password);\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\n// Reset Password\nconst resetPassword = async (email) => {\n  try {\n    await sendPasswordResetEmail(auth, email);\n    alert(\"Password Reset Email sent !\");\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\n// Logout\nconst logout = () => {\n  signOut(auth);\n};\n\n// Get User Details\nconst getUser = async (user) => {\n  const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user.uid));\n  let userDetails = [];\n  const docs = await getDocs(q);\n  docs.forEach((doc) => {\n    console.log(doc.data());\n    userDetails.push(doc.data());\n  });\n  return userDetails[0];\n};\n\n// Add to Firebase Cart\nconst firebaseCart = async (user, cart) => {\n  try {\n    const q = query(collection(db, \"cart\"), where(\"email\", \"==\", user.email));\n    const docs = await getDocs(q);\n    if (docs.docs.length === 0) {\n      await addDoc(collection(db, \"cart\"), {\n        uid: user.uid,\n        email: user.email,\n        cart: cart,\n      });\n    } else {\n      // await updateDoc(\n      //   doc(db, \"cart\", docs),\n      //   {\n      //     cart: cart,\n      //   }\n      // );\n      console.log(docs);\n    }\n    return docs.docs;\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\nexport {\n  auth,\n  db,\n  signInWithGoogle,\n  signupWithEmail,\n  signInWithGithub,\n  loginWithEmail,\n  resetPassword,\n  getUser,\n  logout,\n  firebaseCart,\n};\n\n// // Get Users\n// const users = [];\n// const data = await getDocs(collection(db, \"users\"));\n// if (data) {\n//   data.forEach((item) => {\n//     users.push(item.data());\n//   });\n// }\n// export { users };\n// export const addUser = async (user, cart, fav) => {\n//   try {\n//     if (!users.find((userEmail) => userEmail.email === user.email)) {\n//       await setDoc(doc(db, \"users\", user.email), {\n//         name: user.displayName,\n//         email: user.email,\n//         cart: cart,\n//         fav: fav,\n//       });\n//       // console.log(\"Document written with ID: \", docRef.id);\n//     } else if (!users.find((userCart) => userCart.cart === cart)) {\n//       await updateDoc(doc(db, \"users\", user.email), {\n//         cart: cart,\n//       });\n//     } else if (!users.find((userFav) => userFav.fav === user.fav)) {\n//       await updateDoc(doc(db, \"users\", user.email), {\n//         fav: fav,\n//       });\n//     }\n//     console.log(users);\n//   } catch (e) {\n//     console.error(\"Error adding document: \", e);\n//   }\n// };\n// export const getCartData = async (user) => {\n//   const userCart = [];\n//   const userFav = [];\n//   const docRef = doc(db, \"users\", user.email);\n//   const data = await getDoc(docRef);\n//   if (data.exists()) {\n//     userCart.push(data.data().cart);\n//     userFav.push(data.data().fav);\n//     console.log(userCart, userFav);\n//   } else console.log(\"no data\");\n// };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}